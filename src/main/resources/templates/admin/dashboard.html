<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout}">
<head>
    <title>Tableau de bord administrateur</title>
    <style>
        :root {
            --primary-color: #2E7D32;
            --secondary-color: #1B5E20;
            --accent-color: #4CAF50;
            --text-color: #333;
            --light-bg: #f8f9fa;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--text-color);
        }

        .stat-label {
            color: #666;
            font-size: 1.1rem;
        }

        .recent-activity {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .activity-item {
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .btn-admin {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .btn-admin:hover {
            background: var(--secondary-color);
            color: white;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div layout:fragment="content">
        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Utilisateurs</h3>
                <div class="value" th:text="${userStats.totalUsers}">0</div>
                <div class="stat-details">
                    <span th:text="${userStats.activeUsers} + ' actifs'">0 actifs</span>
                    <span th:text="${userStats.newUsers} + ' nouveaux'">0 nouveaux</span>
                </div>
            </div>

            <div class="stat-card">
                <h3>Organisations</h3>
                <div class="value" th:text="${orgStats.totalOrganizations}">0</div>
                <div class="stat-details">
                    <span th:text="${orgStats.activeOrganizations} + ' actives'">0 actives</span>
                    <span th:text="${orgStats.newOrganizations} + ' nouvelles'">0 nouvelles</span>
                </div>
            </div>

            <div class="stat-card">
                <h3>Actions caritatives</h3>
                <div class="value" th:text="${actionStats.totalActions}">0</div>
                <div class="stat-details">
                    <span th:text="${actionStats.activeActions} + ' actives'">0 actives</span>
                    <span th:text="${actionStats.completedActions} + ' terminées'">0 terminées</span>
                </div>
            </div>

            <div class="stat-card">
                <h3>Dons</h3>
                <div class="value" th:text="${donationStats.totalAmount + ' €'}">0 €</div>
                <div class="stat-details">
                    <span th:text="${donationStats.totalDonations} + ' dons'">0 dons</span>
                    <span th:text="${donationStats.averageAmount + ' € en moyenne'}">0 € en moyenne</span>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="recent-activity">
            <h2>Activité récente</h2>
            
            <!-- Recent Users -->
            <div class="activity-section">
                <h3>Derniers utilisateurs</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Email</th>
                            <th>Date d'inscription</th>
                            <th>Statut</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="user : ${recentUsers}">
                            <td th:text="${user.fullName}">John Doe</td>
                            <td th:text="${user.email}">john@example.com</td>
                            <td th:text="${#temporals.format(user.createdAt, 'dd/MM/yyyy')}">01/01/2024</td>
                            <td>
                                <span class="status-badge" th:classappend="${user.active ? 'active' : 'inactive'}"
                                      th:text="${user.active ? 'Actif' : 'Inactif'}">Actif</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Recent Organizations -->
            <div class="activity-section">
                <h3>Dernières organisations</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Type</th>
                            <th>Date de création</th>
                            <th>Statut</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="org : ${recentOrganizations}">
                            <td th:text="${org.name}">Organization Name</td>
                            <td th:text="${org.type}">Type</td>
                            <td th:text="${#temporals.format(org.createdAt, 'dd/MM/yyyy')}">01/01/2024</td>
                            <td>
                                <span class="status-badge" th:classappend="${org.active ? 'active' : 'inactive'}"
                                      th:text="${org.active ? 'Active' : 'Inactive'}">Active</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Recent Charity Actions -->
            <div class="activity-section">
                <h3>Dernières actions caritatives</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Titre</th>
                            <th>Organisation</th>
                            <th>Date de début</th>
                            <th>Statut</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="action : ${recentCharityActions}">
                            <td th:text="${action.title}">Action Title</td>
                            <td th:text="${action.organization.name}">Organization Name</td>
                            <td th:text="${#temporals.format(action.startDate, 'dd/MM/yyyy')}">01/01/2024</td>
                            <td>
                                <span class="status-badge" th:classappend="${action.status.toLowerCase()}"
                                      th:text="${action.status}">Status</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Recent Donations -->
            <div class="activity-section">
                <h3>Derniers dons</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Donateur</th>
                            <th>Action</th>
                            <th>Montant</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="donation : ${recentDonations}">
                            <td th:text="${donation.donor.fullName}">Donor Name</td>
                            <td th:text="${donation.charityAction.title}">Action Title</td>
                            <td th:text="${donation.amount + ' €'}">0 €</td>
                            <td th:text="${#temporals.format(donation.createdAt, 'dd/MM/yyyy')}">01/01/2024</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h2>Actions rapides</h2>
            <div class="actions-grid">
                <a th:href="@{/admin/users/new}" class="btn btn-primary">
                    <i class="fas fa-user-plus"></i>
                    Nouvel utilisateur
                </a>
                <a th:href="@{/admin/organizations/new}" class="btn btn-primary">
                    <i class="fas fa-building"></i>
                    Nouvelle organisation
                </a>
                <a th:href="@{/admin/charity-actions/new}" class="btn btn-primary">
                    <i class="fas fa-hands-helping"></i>
                    Nouvelle action
                </a>
                <a th:href="@{/admin/reports}" class="btn btn-primary">
                    <i class="fas fa-chart-bar"></i>
                    Générer rapport
                </a>
            </div>
        </div>
    </div>
</body>
</html> 